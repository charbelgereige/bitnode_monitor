# ============================================================================
# Bitnode Monitor Configuration
# ============================================================================
# Copy this file to 'local.env' and fill in your actual values
# IMPORTANT: Never commit local.env to git - it contains sensitive tokens!
# ============================================================================

# ----------------------------------------------------------------------------
# TELEGRAM BOT CONFIGURATION (Required)
# ----------------------------------------------------------------------------
# Get your bot token from @BotFather on Telegram
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# Your Telegram chat ID (get from @userinfobot)
CHAT_ID=123456789

# Enable or disable Telegram notifications (0=disabled, 1=enabled)
ENABLE_TELEGRAM=1

# ----------------------------------------------------------------------------
# BITCOIN CONFIGURATION
# ----------------------------------------------------------------------------
# Path to bitcoin.conf file (for RPC credentials)
BITCOIN_CONF=/mnt/bitcoin/bitcoind/bitcoin.conf

# systemd service name for bitcoind
BITCOIND_SERVICE=bitcoind

# ----------------------------------------------------------------------------
# FULCRUM CONFIGURATION
# ----------------------------------------------------------------------------
# systemd service name for Fulcrum electrum server
FULCRUM_SERVICE=fulcrum

# ----------------------------------------------------------------------------
# DATUM CONFIGURATION (Optional)
# ----------------------------------------------------------------------------
# systemd service name for Datum gateway (optional)
DATUM_SERVICE=datum-gateway

# Cooldown period for Datum alerts in seconds (default: 900 = 15 minutes)
DATUM_COOLDOWN_SEC=900

# ----------------------------------------------------------------------------
# MONITORING INTERVALS
# ----------------------------------------------------------------------------
# How often to check block heights
# Supported formats: "30s", "5m", "2h", or just seconds as integer
# Default: 120 (2 minutes)
CHECK_INTERVAL=120

# How long to wait before marking Fulcrum as stalled (in seconds)
# Default: 1800 (30 minutes)
STALL_THRESHOLD=1800

# How often to regenerate charts (in seconds)
# Default: 3600 (1 hour)
CHART_INTERVAL=3600

# ----------------------------------------------------------------------------
# ALERT THRESHOLDS
# ----------------------------------------------------------------------------
# SSD temperature alert threshold (in Celsius)
# Default: 65
SSD_TEMP_THRESHOLD=65

# CPU usage alert threshold (percentage)
# Default: 90
CPU_ALERT_THRESHOLD=90

# RAM usage alert threshold (percentage)
# Default: 90
RAM_ALERT_THRESHOLD=90

# RPC latency alert threshold (in seconds)
# Default: 10
RPC_LATENCY_THRESHOLD=10

# ----------------------------------------------------------------------------
# AUTO-RECOVERY SETTINGS
# ----------------------------------------------------------------------------
# Enable automatic service restart on stall detection (0=disabled, 1=enabled)
# Default: 1
ENABLE_AUTO_RESTART=1

# EMA window size for speed calculation
# Larger values = smoother but slower to react to changes
# Default: 50
SPEED_WINDOW=50

# ----------------------------------------------------------------------------
# ADVANCED SETTINGS (Optional)
# ----------------------------------------------------------------------------
# HTTP control server port (for bitnode_control.py)
# CONTROL_PORT=18888

# Enable relay mode for SSH tunneling (0=disabled, 1=enabled)
# RELAY_MODE=0

# Relay server URL (if using relay mode)
# RELAY_URL=http://localhost:8080

# ----------------------------------------------------------------------------
# SYSTEMD PRIVILEGES
# ----------------------------------------------------------------------------
# For service restart functionality, ensure your user has sudo privileges
# Add to /etc/sudoers (replace 'username' with your actual username):
#
# username ALL=(ALL) NOPASSWD: /bin/systemctl restart fulcrum
# username ALL=(ALL) NOPASSWD: /bin/systemctl restart bitcoind
# username ALL=(ALL) NOPASSWD: /bin/systemctl restart datum-gateway
# username ALL=(ALL) NOPASSWD: /bin/systemctl status fulcrum
# username ALL=(ALL) NOPASSWD: /bin/systemctl status bitcoind
# username ALL=(ALL) NOPASSWD: /bin/systemctl status datum-gateway
