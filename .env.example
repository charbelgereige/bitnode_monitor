###############################################################################
# Bitnode / Fulcrum / Datum / Bitaxe Monitor — Example Configuration
#
# This file is SAFE TO COMMIT.
# Copy it to `local.env` and adjust values for your environment.
#
# NEVER commit real BOT_TOKEN, CHAT_ID, RPC credentials, or private URLs.
###############################################################################

###############################################################################
# Telegram configuration
###############################################################################

# Telegram bot token (REDACTED in example)
# Obtain from @BotFather
BOT_TOKEN=REDACTED

# Telegram chat ID (REDACTED in example)
# Use @userinfobot or a small test script to discover
CHAT_ID=REDACTED

# Enable Telegram alerts and command listener (0 or 1)
ENABLE_TELEGRAM=1


###############################################################################
# Bitcoin / Fulcrum services
###############################################################################

# Path to bitcoin.conf used by bitcoin-cli
BITCOIN_CONF=/mnt/bitcoin/bitcoind/bitcoin.conf

# systemd service names
FULCRUM_SERVICE=fulcrum
BITCOIND_SERVICE=bitcoind
DATUM_SERVICE=datum-gateway


###############################################################################
# Monitor loop timing
###############################################################################

# Main monitor loop interval
# Typical: 120–300 seconds
CHECK_INTERVAL=300

# Fulcrum stall detection threshold
# Trigger warning if Fulcrum height does not advance for this long
# Typical: 1800–7200 seconds
STALL_THRESHOLD=7200

# Number of height samples used for speed / ETA estimation
# Higher = smoother but slower to react
SPEED_WINDOW=50


###############################################################################
# System health thresholds
###############################################################################

# SSD temperature alert (°C)
SSD_TEMP_THRESHOLD=65

# CPU usage alert (%)
CPU_ALERT_THRESHOLD=90

# RAM usage alert (%)
RAM_ALERT_THRESHOLD=90


###############################################################################
# Charts
###############################################################################

# How often charts are regenerated (seconds)
# Typical: 3600–7200
CHART_INTERVAL=7200


###############################################################################
# Auto-restart behavior
###############################################################################

# Enable automatic Fulcrum restart on confirmed stall (0 or 1)
ENABLE_AUTO_RESTART=0

# Maximum acceptable bitcoind RPC latency before restart is blocked (seconds)
RPC_LATENCY_THRESHOLD=10


###############################################################################
# Telegram transport mode (optional advanced)
###############################################################################

# direct  = connect directly to api.telegram.org (default)
# relay   = send alerts via local relay only (no command listener)
# auto    = try direct briefly, then fall back to relay
TELEGRAM_MODE=direct

# Relay endpoint (used only if TELEGRAM_MODE=relay or auto fallback)
TELEGRAM_RELAY_URL=http://127.0.0.1:18787/notify

# File containing relay authentication token
TELEGRAM_RELAY_TOKEN_FILE=/etc/tg-relay.token

# Seconds to probe direct Telegram connectivity in auto mode
TELEGRAM_DIRECT_PROBE_SECONDS=5


###############################################################################
# Bitaxe (AxeOS) monitoring — URGENT mining health
###############################################################################

# Base URL of the Bitaxe AxeOS web interface (no trailing slash)
# Example: http://192.168.68.102
BITAXE_URL=http://127.0.0.1

# How often the Bitaxe API is polled (seconds)
# Typical: 15–30
BITAXE_CHECK_INTERVAL=30

# Minimum hashrate considered "mining"
# Below this triggers URGENT alert
# Set slightly below normal steady-state hashrate
BITAXE_MIN_HASHRATE_HS=200

# Maximum allowed time with no increase in accepted shares (seconds)
# If exceeded → URGENT alert
# Typical: 180–600
BITAXE_NO_SHARE_SEC=300

# Cooldown between repeated Bitaxe alerts (seconds)
# Prevents Telegram spam
BITAXE_ALERT_COOLDOWN_SEC=180
